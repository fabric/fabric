==================
Autogenerated Help
==================

If you write a file containing many tasks, then you might want to have your help autogenerated from your docstrings.
To do this, simply paste the following lines into your file containing the tasks::

    from fabric.colors import red, magenta, yellow
    import fabric
    import sys

    @task(default = True)
    def help():
        """Prints the help

        All callable methods with @task are printed, along with their docstring.
        """
        print_help_header()
        mod = sys.modules[__name__]
        for attr in dir(mod):
            attribute = getattr(mod, attr)
            if isinstance(attribute, fabric.tasks.Task):
                print_help_attribute(attribute)

    def print_help_header():
        text = '%s HELP' % __name__.upper()
        print yellow ('=' * len(text))
        print yellow (text)
        print yellow ('=' * len(text))

    def print_help_attribute(attribute):
        print
        print magenta (attribute.__name__)
        print magenta ('=' * len(attribute.__name__))
        print
        lines = attribute.__doc__.split('\n')
        print magenta ('%s' % lines[0])
        for line in lines[1:]:
            print red ('%s' % line)

